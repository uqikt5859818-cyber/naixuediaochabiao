<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥ˆé›ªçš„èŒ¶ - æ€§æ ¼æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            color: #2d4a2d;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 35px;
            box-shadow: 0 15px 40px rgba(76, 175, 80, 0.15);
            border: 2px solid #e0f2e0;
        }
        
        .header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 3px solid #4caf50;
        }
        
        .header h1 {
            color: #2e7d32;
            font-size: 36px;
            margin-bottom: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .header p {
            color: #558b55;
            font-size: 18px;
            font-weight: 500;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0f2e0;
            border-radius: 10px;
            margin: 25px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .question {
            background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 25px;
            border-left: 5px solid #4caf50;
            box-shadow: 0 5px 20px rgba(76, 175, 80, 0.08);
        }
        
        .question h3 {
            margin-bottom: 18px;
            color: #33691e;
            font-size: 20px;
            font-weight: 600;
        }
        
        .options label {
            display: block;
            padding: 16px 20px;
            margin: 12px 0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e8f5e9;
            font-weight: 500;
        }
        
        .options label:hover {
            border-color: #4caf50;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.15);
            background: #f1f8e9;
        }
        
        .options input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.3);
            accent-color: #4caf50;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            border: none;
            padding: 18px 45px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 35px auto;
            transition: all 0.4s ease;
            box-shadow: 0 8px 30px rgba(76, 175, 80, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(76, 175, 80, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(-1px);
        }
        
        .result {
            text-align: center;
            display: none;
            padding: 40px;
            background: linear-gradient(135deg, #f1f8e9 0%, #ffffff 100%);
            border-radius: 25px;
            margin-top: 25px;
            border: 3px solid #c8e6c9;
        }
        
        .result h2 {
            color: #2e7d32;
            font-size: 32px;
            margin-bottom: 25px;
            font-weight: bold;
        }
        
        .tea-image {
            width: 180px;
            height: 180px;
            border-radius: 25px;
            object-fit: cover;
            margin: 25px auto;
            border: 4px solid #c8e6c9;
            background: linear-gradient(45deg, #e8f5e9, #ffffff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.2);
        }
        
        .match-score {
            font-size: 28px;
            font-weight: bold;
            color: #4caf50;
            margin: 20px 0;
            background: #e8f5e9;
            padding: 12px 25px;
            border-radius: 30px;
            display: inline-block;
        }
        
        .personality-traits {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin: 25px 0;
        }
        
        .trait {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 15px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .tea-description {
            background: #e8f5e9;
            padding: 25px;
            border-radius: 18px;
            margin: 25px 0;
            font-style: italic;
            color: #33691e;
            border-left: 5px solid #4caf50;
            font-size: 17px;
            line-height: 1.7;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.3);
        }
        
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .question-counter {
            text-align: center;
            color: #558b55;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 16px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
                margin: 15px;
                border-radius: 20px;
            }
            
            .header h1 {
                font-size: 30px;
            }
            
            .question {
                padding: 22px;
            }
            
            .tea-image {
                width: 140px;
                height: 140px;
                font-size: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸµ å¥ˆé›ªçš„èŒ¶ - æ€§æ ¼æµ‹è¯•</h1>
            <p>å®Œæˆ10é“æµ‹è¯•é¢˜ï¼Œå‘ç°ä½ çš„ä¸“å±å¥ˆé›ªé¥®å“ï¼</p>
        </div>

        <div class="question-counter" id="questionCounter">é—®é¢˜ 1/10</div>
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>

        <form id="personalityTest">
            <!-- é—®é¢˜1 -->
            <div class="question">
                <h3>1. å‘¨æœ«ä½ æ›´å–œæ¬¢å¦‚ä½•åº¦è¿‡ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question1" value="A" required> A. å’Œæœ‹å‹ä¸€èµ·èšä¼šçƒ­é—¹</label>
                    <label><input type="radio" name="question1" value="B"> B. æˆ·å¤–è¿åŠ¨æˆ–å¥èº«</label>
                    <label><input type="radio" name="question1" value="C"> C. åœ¨å®¶çœ‹ä¹¦æˆ–çœ‹ç”µå½±</label>
                    <label><input type="radio" name="question1" value="D"> D. å°è¯•æ–°çš„é¤å…æˆ–å’–å•¡é¦†</label>
                </div>
            </div>

            <!-- é—®é¢˜2 -->
            <div class="question">
                <h3>2. ä½ æœ€å–œæ¬¢çš„ç¤¾äº¤å¹³å°æ˜¯ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question2" value="A" required> A. æŠ–éŸ³ - å–œæ¬¢çŸ­è§†é¢‘çš„æ´»åŠ›</label>
                    <label><input type="radio" name="question2" value="B"> B. å°çº¢ä¹¦ - å…³æ³¨å¥åº·ç”Ÿæ´»æ–¹å¼</label>
                    <label><input type="radio" name="question2" value="C"> C. å¾®ä¿¡ - ä¿æŒä¸äº²å‹çš„æ·±åº¦è”ç³»</label>
                    <label><input type="radio" name="question2" value="D"> D. Instagram - åˆ†äº«ç²¾è‡´ç”Ÿæ´»</label>
                </div>
            </div>

            <!-- é—®é¢˜3 -->
            <div class="question">
                <h3>3. é€‰æ‹©æ—…è¡Œç›®çš„åœ°æ—¶ï¼Œä½ æ›´çœ‹é‡ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question3" value="A" required> A. çƒ­é—¹æœ‰è¶£çš„ä¸»é¢˜å…¬å›­</label>
                    <label><input type="radio" name="question3" value="B"> B. è‡ªç„¶é£å…‰å’Œæˆ·å¤–æ¢é™©</label>
                    <label><input type="radio" name="question3" value="C"> C. å†å²æ–‡åŒ–é—å€</label>
                    <label><input type="radio" name="question3" value="D"> D. ç½‘çº¢æ‰“å¡åœ°å’Œç¾é£Ÿ</label>
                </div>
            </div>

            <!-- é—®é¢˜4 -->
            <div class="question">
                <h3>4. æœ‹å‹é€šå¸¸å¦‚ä½•æè¿°ä½ ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question4" value="A" required> A. æ´¾å¯¹çš„ç”Ÿå‘½åŠ›</label>
                    <label><input type="radio" name="question4" value="B"> B. å……æ»¡æ­£èƒ½é‡</label>
                    <label><input type="radio" name="question4" value="C"> C. æ¸©æš–å¯é </label>
                    <label><input type="radio" name="question4" value="D"> D. æœ‰å“å‘³æœ‰æ ¼è°ƒ</label>
                </div>
            </div>

            <!-- é—®é¢˜5 -->
            <div class="question">
                <h3>5. ä½ æœ€è¿‘å…³æ³¨çš„æµè¡Œè¶‹åŠ¿æ˜¯ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question5" value="A" required> A. æœ€æ–°çš„ç½‘ç»œçƒ­æ¢—å’ŒæŒ‘æˆ˜</label>
                    <label><input type="radio" name="question5" value="B"> B. å¥åº·é¥®é£Ÿå’Œè¿åŠ¨æ–¹å¼</label>
                    <label><input type="radio" name="question5" value="C"> C. æ²»æ„ˆç³»å½±è§†å’ŒéŸ³ä¹</label>
                    <label><input type="radio" name="question5" value="D"> D. æ—¶å°šç©¿æ­å’Œç¾å¦†æŠ€å·§</label>
                </div>
            </div>

            <!-- é—®é¢˜6 -->
            <div class="question">
                <h3>6. ä½ çš„å·¥ä½œ/å­¦ä¹ é£æ ¼æ›´æ¥è¿‘ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question6" value="A" required> A. é«˜æ•ˆç›´æ¥ï¼Œè¿½æ±‚ç»“æœ</label>
                    <label><input type="radio" name="question6" value="B"> B. æœ‰è®¡åˆ’æœ‰æ­¥éª¤ï¼Œæ³¨é‡ç»†èŠ‚</label>
                    <label><input type="radio" name="question6" value="C"> C. åˆ›æ„æ— é™ï¼Œå–œæ¬¢å°è¯•æ–°æ–¹æ³•</label>
                    <label><input type="radio" name="question6" value="D"> D. å›¢é˜Ÿåˆä½œï¼Œå–„äºæ²Ÿé€šåè°ƒ</label>
                </div>
            </div>

            <!-- é—®é¢˜7 -->
            <div class="question">
                <h3>7. ä½ æœ€å–œæ¬¢çš„é¢œè‰²ç³»åˆ—æ˜¯ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question7" value="A" required> A. çº¢è‰²/æ©™è‰² - çƒ­æƒ…æ´»åŠ›</label>
                    <label><input type="radio" name="question7" value="B"> B. è“è‰²/ç»¿è‰² - è‡ªç„¶æ¸…æ–°</label>
                    <label><input type="radio" name="question7" value="C"> C. ç²‰è‰²/ç´«è‰² - æµªæ¼«æ¢¦å¹»</label>
                    <label><input type="radio" name="question7" value="D"> D. é»‘ç™½ç° - ç®€çº¦ç»å…¸</label>
                </div>
            </div>

            <!-- é—®é¢˜8 -->
            <div class="question">
                <h3>8. é¢å¯¹æŒ‘æˆ˜æ—¶ï¼Œä½ çš„æ€åº¦æ˜¯ï¼Ÿ</h3>
                <div class="options">
                           <label><input type="radio" name="question8" value="A" required> A. å…´å¥‹è¿æ¥ï¼Œè¶Šæˆ˜è¶Šå‹‡</label>
                    <label><input type="radio" name="question8" value="B"> B. å†·é™åˆ†æï¼Œåˆ¶å®šè®¡åˆ’</label>
                    <label><input type="radio" name="question8" value="C"> C. å¯»æ±‚å¸®åŠ©ï¼Œå›¢é˜Ÿåä½œ</label>
                    <label><input type="radio" name="question8" value="D"> D. çµæ´»åº”å¯¹ï¼Œéšæœºåº”å˜</label>
                </div>
            </div>

            <!-- é—®é¢˜9 -->
            <div class="question">
                <h3>9. ä½ ç†æƒ³ä¸­çš„ä¼‘é—²æ—¶å…‰æ˜¯ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question9" value="A" required> A. å’Œæœ‹å‹ç•…èŠæ¬¢ç¬‘</label>
                    <label><input type="radio" name="question9" value="B"> B. ç‹¬è‡ªäº«å—å®é™æ—¶å…‰</label>
                    <label><input type="radio" name="question9" value="C"> C. æ¢ç´¢æ–°å¥‡æœ‰è¶£çš„äº‹ç‰©</label>
                    <label><input type="radio" name="question9" value="D"> D. é™ªä¼´å®¶äººæ¸©é¦¨ç›¸å¤„</label>
                </div>
            </div>

            <!-- é—®é¢˜10 -->
            <div class="question">
                <h3>10. ä½ é€‰æ‹©é¥®å“æ—¶æœ€çœ‹é‡ï¼Ÿ</h3>
                <div class="options">
                    <label><input type="radio" name="question10" value="A" required> A. å£æ„Ÿä¸°å¯Œï¼Œå±‚æ¬¡åˆ†æ˜</label>
                    <label><input type="radio" name="question10" value="B"> B. å¥åº·å¤©ç„¶ï¼Œä½ç³–ä½å¡</label>
                    <label><input type="radio" name="question10" value="C"> C. é¢œå€¼é«˜ï¼Œé€‚åˆæ‹ç…§</label>
                    <label><input type="radio" name="question10" value="D"> D. ç»å…¸å£å‘³ï¼Œç¨³å®šå“è´¨</label>
                </div>
            </div>
            
            <button type="submit" class="submit-btn">ğŸŒ¿ ç”Ÿæˆæˆ‘çš„é¥®å“æŠ¥å‘Š</button>
        </form>

        <div class="result" id="resultSection">
            <h2>ğŸ‰ ä½ çš„ä¸“å±å¥ˆé›ªæ¨è</h2>
            <div class="tea-image" id="teaEmoji">ğŸµ</div>
            <div id="teaResult"></div>
            <div class="match-score">åŒ¹é…åº¦: <span id="matchScore">0</span>%</div>
            <div class="personality-traits" id="personalityTraits"></div>
            <div class="tea-description" id="teaDescription"></div>
            <button class="restart-btn" onclick="restartTest()">å†æµ‹ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // æ›´æ–°è¿›åº¦æ¡å’Œé—®é¢˜è®¡æ•°å™¨
        function updateProgress() {
            const questions = document.querySelectorAll('.question');
            const progressBar = document.getElementById('progressBar');
            const questionCounter = document.getElementById('questionCounter');
            
            let answeredCount = 0;
            questions.forEach(question => {
                const inputs = question.querySelectorAll('input[type="radio"]');
                const isAnswered = Array.from(inputs).some(input => input.checked);
                if (isAnswered) answeredCount++;
            });
            
            const progressPercentage = (answeredCount / questions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            questionCounter.textContent = `å·²å®Œæˆ: ${answeredCount}/${questions.length}`;
        }

        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ä»¥æ›´æ–°è¿›åº¦
        document.querySelectorAll('input[type="radio"]').forEach(input => {
            input.addEventListener('change', updateProgress);
        });

        // åˆå§‹åŒ–è¿›åº¦
        updateProgress();

        // å¥ˆé›ªç»å…¸é¥®å“æ•°æ®
        const teaPersonalityMap = {
            "éœ¸æ°”èŠå£«è‰è“": {
                "emoji": "ğŸ“ğŸ§€",
                "personality": ["æ—¶å°š", "ç”œç¾", "è¿·äºº", "åˆ›æ„"],
                "description": "æ–°é²œè‰è“+èŠå£«å¥¶ç›–ï¼Œé…¸ç”œå¯å£ï¼Œå¥¶é¦™æµ“éƒï¼Œå¥ˆé›ªæ‹›ç‰Œäº§å“ï¼"
            },
            "éœ¸æ°”æ©™å­": {
                "emoji": "ğŸŠ",
                "personality": ["é˜³å…‰", "æ´»åŠ›", "å¥åº·", "ç§¯æ"],
                "description": "èŒ‰è‰åˆé›ªèŒ¶åº•+èµ£å—è„æ©™ï¼ŒVCä¸°å¯Œï¼Œæ¸…çˆ½è§£æ¸´ï¼Œç»å…¸æœèŒ¶ï¼"
            },
            "æ¨æç”˜éœ²": {
                "emoji": "ğŸ¥­",
                "personality": ["ä¸°å¯Œ", "å±‚æ¬¡", "æ¸©æš–", "åŒ…å®¹"],
                "description": "èŠ’æœä¸è¥¿æŸšçš„ç»å…¸ç»„åˆï¼Œå£æ„Ÿä¸°å¯Œï¼Œå¥ˆé›ªå¿…ç‚¹é¥®å“ï¼"
            },
            "èŒ‰è‰åˆé›ª": {
                "emoji": "ğŸŒ¸",
                "personality": ["ä¼˜é›…", "æ¸…æ–°", "çŸ¥æ€§", "ç®€çº¦"],
                "description": "æ·¡é›…èŒ‰è‰èŠ±èŒ¶ï¼Œæ¸…é¦™ä¸ç”œè…»ï¼Œå›å½’æœ¬çœŸå‘³é“ï½"
            },
            "é‡‘è‰²å±±è„‰çç å¥¶èŒ¶": {
                "emoji": "ğŸ§‹",
                "personality": ["æ¸©æŸ”", "ä½“è´´", "æ€€æ—§", "ç¨³é‡"],
                "description": "é‡‘è‰²å±±è„‰çº¢èŒ¶+é²œå¥¶+é»‘ç³–çç ï¼Œç»å…¸æ­é…ï¼Œæ¸©æš–æ²»æ„ˆï½"
            },
            "èŠ‹æ³¥å®è—èŒ¶": {
                "emoji": "ğŸ ",
                "personality": ["æ¸©æš–", "è´´å¿ƒ", "ç»†è…»", "åŒ…å®¹"],
                "description": "ç»µå¯†èŠ‹æ³¥+é²œå¥¶+èŠ‹åœ†ï¼Œå£æ„Ÿä¸°å¯Œï¼Œå†¬æ—¥æš–å¿ƒé¦–é€‰ï¼"
            },
            "æµ“æŠ¹å¹²é…ªé¦™æ°´æ¤°": {
                "emoji": "ğŸµğŸ¥¥",
                "personality": ["åˆ›æ–°", "ç‹¬ç‰¹", "å‰å«", "æ—¶å°š"],
                "description": "å¥ˆé›ªGreenåº—æ‹›ç‰Œï¼ŒæŠ¹èŒ¶ä¸æ¤°å­çš„åˆ›æ–°ç»“åˆï¼Œå£æ„Ÿå±‚æ¬¡ä¸°å¯Œï¼"
            },
            "è¶…èƒ½ç‰›æ²¹æœé…¸å¥¶æ˜”": {
                "emoji": "ğŸ¥‘",
                "personality": ["å¥åº·", "è¥å…»", "æ´»åŠ›", "ç§¯æ"],
                "description": "å¥åº·è¥å…»ï¼Œç‰›æ²¹æœä¸é…¸å¥¶çš„å®Œç¾æ­é…ï¼Œè¡¥å……æ¯æ—¥èƒ½é‡ï¼"
            },
            "å¤šè‚‰è‘¡è„": {
                "emoji": "ğŸ‡",
                "personality": ["æ´»åŠ›", "é˜³å…‰", "ç§¯æ", "å¥åº·"],
                "description": "å¤šè‚‰è‘¡è„æœè‚‰+èŒ¶åº•ï¼ŒVCæ»¡æ»¡ï¼Œæœè‚‰ä¸°å¯Œï¼Œå¥ˆé›ªç»å…¸ï¼"
            },
            "é¦™æŸšæŠ¹èŒ¶å†°å¥¶": {
                "emoji": "ğŸŠğŸµ",
                "personality": ["åˆ›æ–°", "ç‹¬ç‰¹", "æ¸…æ–°", "æ—¶å°š"],
                "description": "å¥ˆé›ªæ–°å“ï¼ŒæŸšå­ä¸æŠ¹èŒ¶çš„åˆ›æ–°ç»„åˆï¼Œæ¸…æ–°çˆ½å£ï¼"
            },
            "å°”æ»¨åˆ—å·´å®è—èŒ¶": {
                "emoji": "ğŸ",
                "personality": ["ä¼ ç»Ÿ", "æ–‡åŒ–", "æ¸©æš–", "æ€€æ—§"],
                "description": "åœ°åŸŸç‰¹è‰²äº§å“ï¼Œä¸œåŒ—é£å‘³å¥¶èŒ¶ï¼Œæ¸©æš–æœ‰æ–™ï¼"
            },
            "ç±³å¸ƒå®è—èŒ¶": {
                "emoji": "ğŸš",
                "personality": ["å¥åº·", "æ¸©æš–", "ç»†è…»", "ä¼ ç»Ÿ"],
                "description": "äº‘å—ç‰¹è‰²ï¼Œç±³å¸ƒä¸å¥¶èŒ¶çš„ç»“åˆï¼Œæ¸©æš–æœ‰æ–™çš„å¥åº·é¥®å“ï¼"
            }
        };

        // æäº¤æµ‹è¯•
        document.getElementById('personalityTest').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // æ”¶é›†æ‰€æœ‰ç­”æ¡ˆ
            const answers = {};
            let allAnswered = true;
            
            for (let i = 1; i <= 10; i++) {
                const selected = document.querySelector(`input[name="question${i}"]:checked`);
                if (selected) {
                    answers[i] = selected.value;
                } else {
                    allAnswered = false;
                    // é«˜äº®æ˜¾ç¤ºæœªå›ç­”çš„é—®é¢˜
                    document.querySelector(`.question:nth-child(${i+2})`).style.borderColor = '#ff6b6b';
                }
            }
            
            if (!allAnswered) {
                alert('è¯·å›ç­”æ‰€æœ‰é—®é¢˜åå†æäº¤ï¼');
                return;
            }

            // è®¡ç®—æ¨èç»“æœ
            const result = calculateTeaRecommendation(answers);
            
            // æ˜¾ç¤ºç»“æœ
            showResult(result);
        });

        // è®¡ç®—å¥¶èŒ¶æ¨è
        function calculateTeaRecommendation(answers) {
            const personalityScores = {
                "æ´»æ³¼": 0, "çƒ­æƒ…": 0, "å¤–å‘": 0, "ä¹è§‚": 0,
                "é˜³å…‰": 0, "æ´»åŠ›": 0, "å¥åº·": 0, "ç§¯æ": 0,
                "æ¸©æŸ”": 0, "ä½“è´´": 0, "æ€€æ—§": 0, "ç¨³é‡": 0,
                "ä¼˜é›…": 0, "ç²¾è‡´": 0, "æˆç†Ÿ": 0, "çŸ¥æ€§": 0,
                "æµªæ¼«": 0, "åˆ›æ„": 0, "æ„Ÿæ€§": 0, "ç‹¬ç‰¹": 0,
                "æ—¶å°š": 0, "ç”œç¾": 0, "è¿·äºº": 0, "å¯çˆ±": 0,
                "ç»å…¸": 0, "ä¼ ç»Ÿ": 0, "æ–‡åŒ–": 0, "å†…æ¶µ": 0,
                "åˆ›æ–°": 0, "å¤§èƒ†": 0, "å‰å«": 0, "è‡ªç„¶": 0
            };

            // æ ¹æ®ç­”æ¡ˆè®¡ç®—åˆ†æ•°
            Object.entries(answers).forEach(([qId, answer]) => {
                const scoreMap = {
                    '1': { 'A': ["æ´»æ³¼", "å¤–å‘"], 'B': ["æ´»åŠ›", "å¥åº·"], 'C': ["ç¨³é‡", "æ¸©æŸ”"], 'D': ["ç²¾è‡´", "ç‹¬ç‰¹"] },
                    '2': { 'A': ["çƒ­æƒ…", "ä¹è§‚"], 'B': ["å¥åº·", "ç§¯æ"], 'C': ["ä½“è´´", "æ€€æ—§"], 'D': ["æ—¶å°š", "ç²¾è‡´"] },
                    '3': { 'A': ["å¤–å‘", "æ´»æ³¼"], 'B': ["è‡ªç„¶", "æ´»åŠ›"], 'C': ["æ–‡åŒ–", "å†…æ¶µ"], 'D': ["æ—¶å°š", "åˆ›æ–°"] },
                    '4': { 'A': ["çƒ­æƒ…", "æ´»åŠ›"], 'B': ["ç§¯æ", "é˜³å…‰"], 'C': ["æ¸©æŸ”", "ä½“è´´"], 'D': ["ä¼˜é›…", "ç²¾è‡´"] },
                    '5': { 'A': ["åˆ›æ–°", "å‰å«"], 'B': ["å¥åº·", "è‡ªç„¶"], 'C': ["æ¸©æŸ”", "æ„Ÿæ€§"], 'D': ["æ—¶å°š", "è¿·äºº"] }, // ä¿®å¤äº†è¿™é‡Œçš„è¯­æ³•é”™è¯¯
                    '6': { 'A': ["é«˜æ•ˆ", "ç›´æ¥"], 'B': ["ç¨³é‡", "ç»†è‡´"], 'C': ["åˆ›æ„", "ç‹¬ç‰¹"], 'D': ["ä½“è´´", "åˆä½œ"] },
                    '7': { 'A': ["çƒ­æƒ…", "æ´»åŠ›"], 'B': ["è‡ªç„¶", "æ¸…æ–°"], 'C': ["æµªæ¼«", "ç”œç¾"], 'D': ["ç»å…¸", "ç®€çº¦"] },
                    '8': { 'A': ["å‹‡æ•¢", "ç§¯æ"], 'B': ["ç¨³é‡", "ç†æ€§"], 'C': ["åˆä½œ", "ä½“è´´"], 'D': ["çµæ´»", "åˆ›æ„"] },
                    '9': { 'A': ["å¤–å‘", "çƒ­æƒ…"], 'B': ["å†…å‘", "ç¨³é‡"], 'C': ["åˆ›æ„", "å¥½å¥‡"], 'D': ["æ¸©æŸ”", "å®¶åº­"] },
                    '10': { 'A': ["ä¸°å¯Œ", "å±‚æ¬¡"], 'B': ["å¥åº·", "è‡ªç„¶"], 'C': ["æ—¶å°š", "é¢œå€¼"], 'D': ["ç»å…¸", "ç¨³å®š"] }
                };

                if (scoreMap[qId] && scoreMap[qId][answer]) {
                    scoreMap[qId][answer].forEach(trait => {
                        personalityScores[trait] += 2;
                    });
                }
            });

            // æ‰¾å‡ºæœ€é«˜åˆ†ç‰¹è´¨
            const maxScore = Math.max(...Object.values(personalityScores));
            const dominantPersonality = Object.entries(personalityScores)
                .filter(([_, score]) => score >= maxScore - 1)
                .map(([trait]) => trait);

            // è®¡ç®—æœ€é€‚åˆçš„å¥¶èŒ¶
            let bestMatch = null;
            let bestScore = 0;

            Object.entries(teaPersonalityMap).forEach(([teaName, teaInfo]) => {
                const matchScore = teaInfo.personality.filter(trait => 
                    dominantPersonality.includes(trait)
                ).length * 15 + Math.random() * 25;

                if (matchScore > bestScore) {
                    bestScore = matchScore;
                    bestMatch = {
                        teaName,
                        ...teaInfo,
                        personality: dominantPersonality.slice(0, 4),
                        matchScore: Math.min(98, Math.round(bestScore))
                    };
                }
            });

            return bestMatch || {
                teaName: "éœ¸æ°”èŠå£«è‰è“",
                emoji: "ğŸ“ğŸ§€",
                personality: ["ç¥ç§˜", "ç‹¬ç‰¹"],
                description: "æ–°é²œè‰è“+èŠå£«å¥¶ç›–ï¼Œé…¸ç”œå¯å£ï¼Œå¥¶é¦™æµ“éƒï¼Œå¥ˆé›ªæ‹›ç‰Œäº§å“ï¼",
                matchScore: 85
            };
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(result) {
            document.getElementById('teaEmoji').textContent = result.emoji;
            document.getElementById('teaResult').innerHTML = `<h3 style="color:#2e7d32;font-size:28px;">${result.teaName}</h3>`;
            document.getElementById('matchScore').textContent = result.matchScore;
            document.getElementById('teaDescription').textContent = result.description;
            
            // æ˜¾ç¤ºæ€§æ ¼ç‰¹è´¨
            const traitsContainer = document.getElementById('personalityTraits');
            traitsContainer.innerHTML = '';
            result.personality.forEach(trait => {
                traitsContainer.innerHTML += `<span class="trait">${trait}</span>`;
            });
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('resultSection').style.display = 'block';
            
            // å¹³æ»‘æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('resultSection').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // é‡æ–°æµ‹è¯•
        function restartTest() {
            document.getElementById('personalityTest').reset();
            document.getElementById('resultSection').style.display = 'none';
            
            // é‡ç½®é—®é¢˜è¾¹æ¡†é¢œè‰²
            document.querySelectorAll('.question').forEach(q => {
                q.style.borderColor = '#4caf50';
            });
            
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>